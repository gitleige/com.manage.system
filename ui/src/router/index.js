/* eslint-disable */import Vue from 'vue';import Router from 'vue-router';import register from '../components/auth/register';import login from '../components/auth/login';import index from '../components/common/index';import dashboard from '../components/page/dashboard';import addcase from "../components/page/addcase";import editcase from "../components/page/editcase";import executecase from "../components/page/executecase";import testresult from "../components/page/testresult";import testreport from "../components/page/testreport";import upload from "../components/page/upload";import forbbiden from '../components/page/403';import notfound from '../components/page/404';Vue.use(Router);const router = new Router({    mode: 'history',    routes: [        {            path: '/',            redirect: '/dashboard'        },        {            path: '/',            component: index,            meta: {title: '首页'},            children: [                {                    path: '/dashboard',                    component: dashboard,                    meta: {title: '系统首页', requireAuth: true}                },                {                    path: '/addcase',                    component: addcase,                    meta: {title: '新增用例', requireAuth: true}                },                {                    path: '/editcase',                    component: editcase,                    meta: {title: '编辑用例', requireAuth: true}                },                {                    path: '/executecase',                    component: executecase,                    meta: {title: '执行用例', requireAuth: true}                },                {                    path: '/testresult',                    component: testresult,                    meta: {title: '测试结果', requireAuth: true}                },                {                    path: '/testreport',                    component: testreport,                    meta: {title: '测试报告', requireAuth: true}                },                {                    path: '/upload',                    component: upload,                    meta: {title: '文件上传', requireAuth: true}                },                {                    path: '/404',                    component: notfound,                    meta: {title: '页面不存在', requireAuth: true}                },                {                    path: '/403',                    component: forbbiden,                    meta: {title: '禁止访问'}                },            ]        },        {            path: '/login',            component: login,            meta: {title: '登录'}        },        {            path: '/register',            component: register,            meta: {title: '注册'}        },        {            path: '*',            redirect: '/404'        }    ]});router.beforeEach((to, from, next) => {    const user = localStorage.getItem('username');    if (to.meta.requireAuth) { // 判断该路由是否需要登录权限        if (user) { // 通过vuex state获取当前的用户名是否存在            next()        } else {            next({                    path: '/login',                    query: {redirect: to.fullPath} // 将跳转的路由path作为参数，登录成功后跳转到该路由                },                Vue.prototype.$message.warning('检测到您还未登录,请登录后操作！'))        }    } else {        next()    }});export default router